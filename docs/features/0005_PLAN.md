# PWA Installability, Fullscreen Native Experience & Portrait Orientation Lock

## Brief Description
Enhance the existing PWA setup to make the app properly installable, provide fullscreen native app experience when installed, and lock the orientation to portrait mode.

## Current PWA Setup Analysis
The app currently has basic PWA infrastructure:
- `public/app/manifest.json` with `display: "standalone"`
- `public/app/sw.js` service worker with basic caching
- Manifest and service worker properly linked in `index.html`

## Required Changes

### 1. Manifest.json Enhancements (`public/app/manifest.json`)
Add missing PWA manifest properties for proper installability and native experience:
- `orientation: "portrait"` - Lock app to vertical orientation
- `categories` - Define app categories for better store listings
- `lang` - Set default language
- `prefer_related_applications: false` - Prefer web app over native apps
- `iarc_rating_id` - Age rating for app stores
- `related_applications` - Define related native apps (empty array)
- `edge_side_panel` - Disable Edge side panel integration
- `file_handlers` - Define file handling capabilities
- `handle_links` - Define link handling behavior
- `launch_handler` - Define app launch behavior
- `protocol_handlers` - Define custom protocol handlers
- `file_handlers` - Define file type handlers
- `shortcuts` - Enhance existing shortcuts with icons and descriptions

### 2. Service Worker Enhancements (`public/app/sw.js`)
Improve offline capabilities and PWA features:
- Add periodic cache cleanup to prevent storage bloat
- Implement background sync for form submissions
- Add push notification support infrastructure
- Enhance caching strategy for better offline experience
- Add cache versioning and migration logic

### 3. HTML Meta Tags (`index.html`)
Add missing meta tags for better PWA support:
- `apple-mobile-web-app-capable` - Enable fullscreen on iOS
- `apple-mobile-web-app-status-bar-style` - Customize iOS status bar
- `apple-mobile-web-app-title` - Set app title on iOS home screen
- `mobile-web-app-capable` - Enable fullscreen on Android
- `msapplication-TileColor` - Set Windows tile color
- `msapplication-TileImage` - Set Windows tile image
- `theme-color` meta tag variations for different platforms

### 4. CSS Enhancements (`styles/global.css`)
Add CSS for better fullscreen/native app experience:
- Hide browser UI elements when in standalone mode
- Add safe area handling for devices with notches
- Implement proper viewport handling
- Add CSS for orientation lock feedback

### 5. JavaScript PWA Detection (`src/lib/pwa.ts`)
Create utility functions for PWA detection and installation:
- Detect if app is running in standalone mode
- Detect if app is installable
- Handle install prompt events
- Provide installation status to components

### 6. App Shell Component Updates (`src/AppShell.tsx`)
Enhance the main app component for PWA experience:
- Add PWA installation prompt handling
- Implement orientation change detection
- Add fullscreen mode detection
- Handle PWA-specific UI adjustments

### 7. Icon Optimization
Ensure all required icon sizes are present:
- Verify 192x192 and 512x512 icons exist
- Add additional icon sizes for better platform support
- Add monochrome icons for better Android integration
- Add maskable icons for adaptive icon support

## Implementation Phases

### Phase 1: Core PWA Manifest & Meta Tags
1. Update `public/app/manifest.json` with all required PWA properties
2. Add comprehensive meta tags to `index.html`
3. Ensure all required icons are present and properly sized

### Phase 2: Service Worker & Offline Enhancements
1. Enhance service worker with better caching strategies
2. Add background sync capabilities
3. Implement cache management and cleanup

### Phase 3: CSS & UI Adaptations
1. Add CSS for fullscreen/native app experience
2. Implement safe area handling
3. Add orientation lock styling and feedback

### Phase 4: JavaScript Integration
1. Create PWA detection utilities
2. Add installation prompt handling
3. Implement orientation change detection
4. Update app shell component for PWA features

## PWA Installability Criteria Checklist
- [ ] Web app manifest with required fields
- [ ] Service worker with fetch event handler
- [ ] Served over HTTPS (or localhost for development)
- [ ] Responsive design
- [ ] Start URL defined
- [ ] Icons at least 192x192 and 512x512
- [ ] Orientation lock set to portrait
- [ ] Display mode set to standalone
- [ ] Theme color and background color defined

## Testing Requirements
- Test on Chrome, Firefox, Safari, and Edge
- Test on iOS Safari and Android Chrome
- Verify installation prompts appear
- Test portrait orientation lock
- Verify fullscreen mode works when installed
- Test offline functionality
